# Postgres
POSTGRES_USER=app
POSTGRES_PASSWORD=app
POSTGRES_DB=crypto
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Redis
REDIS_HOST=redis
REDIS_PORT=6379

# MinIO / S3
S3_ENDPOINT_URL=http://minio:9000
S3_REGION=us-east-1
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=artifacts

# Telegram
TELEGRAM_BOT_TOKEN=8409630096:AAEK8Q_P_jn9t91eby_g2uFktMRGNz3uwI0
# OpenAI (для будущих модулей)
OPENAI_API_KEY= sk-xxxxx
OPENAI_MODEL=gpt-4o-mini
# Allow ample reasoning space for complex tasks
LLM_MAX_TOKENS=4096
ENABLE_LLM_CACHE=1
LLM_CACHE_TTL_SEC=600
LLM_CALLS_BUDGET=8
OPENAI_MODEL_NEWS_FACTS=gpt-4o-mini
OPENAI_MODEL_DEBATE=gpt-4o
OPENAI_MODEL_MASTER=gpt-4o

# Timezone слота
TIMEZONE=Europe/Moscow

# Новости
CRYPTOPANIC_TOKEN=
NEWSAPI_KEY=
# RSS fallback (comma/newline separated). Leave empty to use defaults
RSS_NEWS_SOURCES=
RSS_SOURCES_FILE=
RSS_TIMEOUT_SEC=10
RSS_CONCURRENCY=8
ENABLE_ORDERBOOK=0
ENABLE_ONCHAIN=0
DUNE_API_KEY=
# Dune Query IDs (public queries you own or found). Example integers only:
# DUNE_QUERY_ACTIVE_ADDRESSES=12345
# DUNE_QUERY_EXCHANGES_NETFLOW_SUM=67890
# DUNE_QUERY_MVRV_Z_SCORE=11223
# DUNE_QUERY_SOPR=44556
# DUNE_QUERY_MINERS_BALANCE_SUM=77889
# DUNE_QUERY_TRANSFERS_VOLUME_SUM=99100
ENABLE_FUTURES=0
FUTURES_PROVIDER=binance
ENABLE_SOCIAL=0
SOCIAL_QUERY=bitcoin OR btc
SOCIAL_SUBREDDITS=bitcoin,cryptocurrency
SOCIAL_MAX_ITEMS=100
TWITTER_BEARER_TOKEN=
REDDIT_USER_AGENT=cf-agent/0.1
COINDESK_RSS_URL=https://www.coindesk.com/arc/outboundfeeds/rss/?outputType=xml
COINTELEGRAPH_RSS_URL=https://cointelegraph.com/rss
ENABLE_DEEP_PRICE=0
USE_HF_SENTIMENT=0
HF_SENTIMENT_MODEL=nlptown/bert-base-multilingual-uncased-sentiment
USE_SOCIAL_EMB=0
SOCIAL_EMB_MODEL=sentence-transformers/all-MiniLM-L6-v2
ENABLE_ALT_DATA=0
WRITE_ALT_TO_DB=1
QUANDL_API_KEY=
COINGLASS_API_KEY=
ALT_GOOGLE_QUERIES=bitcoin,btc price
ALT_EXCHANGES=binance,bybit,okx,kraken
ALT_ORDER_SIZE_USD=100000
ALT_SECURITY_RSS=
ALT_REGULATORY_RSS=
LIQUIDITY_MIN_USD=1000000000
LIQUIDITY_MAX_SLIP_BPS=15
ENABLE_LLM_FORECAST=0
ENABLE_NEWS_FACTS=0
NEWS_FACTS_TOPK=10
NEWS_FACTS_DECAY_HOURS=12
NEWS_CTX_COEFF_A=0.1
NEWS_CTX_COEFF_B=0.6
NEWS_CTX_COEFF_C=0.5
NEWS_CTX_WIN_SHORT_MIN=30
NEWS_CTX_WIN_LONG_MIN=180
NEWS_CTX_K=0.5
NEWS_SENSITIVE_MODELS=llm_news,ml_*
ENABLE_NEWS_SENTIMENT=0
FLOWISE_SENTIMENT_URL=

# Regime-aware weighting
ENABLE_REGIME_WEIGHTING=1
ALPHA_UPDATE_INTERVAL_H=6
REGIME_ALPHA_MIN=0.7
REGIME_ALPHA_MAX=1.3
REGIME_ALPHA_DECAY_DAYS=14
REGIME_ALPHA_SMOOTH_BETA=0.3

# Telegram Payments (Stars)
TELEGRAM_PRIVATE_CHANNEL_ID=
TELEGRAM_DM_USER_IDS=

## Final prices in Telegram Stars (milli-stars)
# Defaults: 1 month = 2500⭐, 12 months = 25000⭐
PRICE_STARS_MONTH=2500
PRICE_STARS_YEAR=25000

TELEGRAM_ADMIN_CHAT_ID=
TELEGRAM_OWNER_ID=
TELEGRAM_ADMIN_IDS=@softis1233

CRYPTO_PAYMENT_URL=

CRYPTO_WEBHOOK_SECRET=
REDEEM_CODE=


# Affiliate metrics conversion: 1 unit -> USD (optional)
AFF_UNIT_TO_USD=0
# Hide crypto button unless a real provider is integrated (kept off by default)
ENABLE_CRYPTO_PAY=0


# Включить запись новостей в БД
WRITE_NEWS_TO_DB=0

# Бумажная торговля
PAPER_SYMBOL=BTC/USDT

# Observability
PROM_PUSHGATEWAY_URL=
SENTRY_DSN=
USE_KATS=1
# Feature flags
FEATURES_PRO=1
FEATURES_KATS=1
ENABLE_STACKING=0
ENABLE_MCP=0
# Master agent and debate
USE_MASTER_AGENT=1
ENABLE_MULTI_DEBATE=1
ENSEMBLE_SIMILAR_BONUS=0.2
SIMILAR_TOPK_LIMIT=5
# Flowise endpoints (optional)
FLOWISE_EXPLAIN_URL=
FLOWISE_DEBATE_URL=
FLOWISE_SCENARIO_URL=
FLOWISE_BASE_URL=http://flowise:3000
FLOWISE_TIMEOUT_SEC=15
FLOWISE_MAX_RETRIES=2
FLOWISE_BACKOFF_SEC=1.0
USE_COORDINATOR=0
ENABLE_LLM_VALIDATOR=0
FLOWISE_VALIDATE_URL=

# MCP mini-server (optional)
MCP_HOST=0.0.0.0
MCP_PORT=8765
# Alternatively provide full URL (overrides host/port)
MCP_URL=

# Pattern Discovery (agent + DAG)
DISC_SYMBOL=BTC/USDT
DISC_PROVIDER=binance
DISC_DAYS=120
DISC_MOVE_THRESHOLD=0.05
DISC_WINDOW_HOURS=24
DISC_LOOKBACK_PRE_HOURS=48
DISC_SAMPLE_LIMIT=40
DISC_DRY_RUN=1
# 4h overrides
DISC_DAYS_4H=240
DISC_MOVE_THRESHOLD_4H=0.08
DISC_WINDOW_HOURS_4H=48
DISC_LOOKBACK_PRE_HOURS_4H=96
DISC_SAMPLE_LIMIT_4H=40

# Pattern heuristics thresholds (bps / bars)
PAT_TOL_BPS=50
PAT_DEPTH_BPS=30
PAT_MIN_SEP=10

# Order flow ingestion (optional)
ENABLE_ORDER_FLOW=0
ORDERFLOW_WINDOW_SEC=60
ORDERFLOW_POLL_SEC=1.0
ORDERFLOW_USE_WS=0

# y_true cache for ensemble weighting
YTRUE_CACHE_TTL_SEC=86400

# Scheduler
RUN_INTERVAL_SEC=3600
RT_OUTCOMES_HORIZONS=30m,60m
RUN_PAPER_ADAPT=1

# Real-Time (Trigger → Master)
RT_TRIGGER_QUEUE=rt:triggers
TRIGGER_SYMBOL=BTC/USDT
TRIGGER_POLL_SLEEP=5.0
TRIGGER_VOL_SPIKE_FACTOR=3.0
TRIGGER_VOL_EMA_ALPHA=0.03
TRIGGER_DELTA_BASE_MIN=20.0
TRIGGER_COOLDOWN_SEC=300
TRIGGER_WATCH_NEWS=1
TRIGGER_NEWS_IMPACT_MIN=0.7
TRIGGER_NEWS_LOOKBACK_SEC=120
TRIGGER_ADAPTIVE=1
TRIGGER_ADAPT_EVERY_SEC=300
RT_HORIZON_DEFAULT_MIN=30
RT_HORIZON_VOL_SPIKE_MIN=30
RT_HORIZON_DELTA_SPIKE_MIN=30
RT_HORIZON_NEWS_MIN=60
RT_PRICES_LOOKBACK_SEC=172800
RT_TIMEFRAME=1m
RT_NEWS_WINDOW_H=6
RT_VALID_FOR_MIN=30

# Paper execution tweaks
PAPER_EXEC_LOOKBACK_DAYS=3
PAPER_RISK_PER_TRADE=0.005

# L2 orderbook triggers
TRIGGER_L2_ENABLE=1
TRIGGER_L2_DEPTH_LEVELS=50
TRIGGER_L2_NEAR_BPS=10
TRIGGER_L2_WALL_MIN_BASE=50.0
TRIGGER_L2_IMBALANCE_RATIO=2.0

# News polling
TRIGGER_NEWS_POLL_SEC=120
TRIGGER_NEWS_WINDOW_H=1

# Separate RT Telegram channel (optional)
TELEGRAM_RT_CHAT_ID=

# TradeRecommend tuning (optional)
TR_K_ATR=1.5
TR_RR_TARGET=1.6
TR_TUNE_WINDOW_DAYS=30

# CPD features (simple fallback)
USE_CPD_SIMPLE=1
CPD_Z_THRESHOLD=2.5
CPD_WINDOW=30

# A/B challenger ensemble
ENABLE_CHALLENGER=1
CHALLENGER_MODE=uniform

# Retraining
ENABLE_RETRAIN=0
RETRAIN_INTERVAL_H=24
RETRAIN_FEATURES_S3=
RETRAIN_HORIZONS=4h,12h

# Optional Darts models
USE_DARTS=1
USE_DARTS_NBEATS=0
NBEATS_EPOCHS=5

# Optional NeuralProphet
USE_NEURALPROPHET=1
NP_EPOCHS=5

# Optional Prophet
USE_PROPHET=0
USE_DARTS_PROPHET=0

# Optional: Auto-tune ARIMA via Optuna
AUTO_TUNE_ARIMA=0
ARIMA_TUNING_TRIALS=20

# MLflow tracking (optional)
MLFLOW_TRACKING_URI=
ML_MODELS_S3_PREFIX=models/ml
ML_MODEL_S3=

# Live Trading (use with care!)
EXCHANGE=binance
# Optional override for ccxt provider across ingestion modules
CCXT_EXCHANGE=binance
CCXT_TIMEOUT_MS=20000
CCXT_RETRIES=3
CCXT_RETRY_BACKOFF_SEC=1.0
EXCHANGE_TYPE=spot
EXCHANGE_API_KEY=
EXCHANGE_SECRET=
EXCHANGE_PASSWORD=
EXEC_SYMBOL=BTC/USDT
DRY_RUN=1
RISK_LOOP_INTERVAL=60
RISK_TRAIL_PCT=0.01
RISK_IMPROVE_PCT=0.003
